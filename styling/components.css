.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: var(--space-4);
  margin-top: var(--space-4);
}

.card {
  background: var(--bg-elev);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}

.card-link { color: inherit; text-decoration: none; display: block; }
.card-link:hover .card-title { text-decoration: underline; }

.card-media { aspect-ratio: 4 / 3; background: #0b0e14; display: grid; place-items: center; }
.card-media img { width: 100%; height: 100%; object-fit: cover; }

.card-body { padding: var(--space-3); }
.card-title { font-size: 1rem; font-weight: 600; }
.card-tagline { font-size: 0.9rem; color: var(--muted); margin-top: 4px; }

/* Brand */
.brand { display: inline-flex; align-items: center; gap: var(--space-3); color: inherit; text-decoration: none; }
.brand:hover { text-decoration: none; }
.brand__logo { border-radius: 8px; }
.brand__name { font-weight: 700; letter-spacing: 0.2px; }

/* Form grid for controls */
.form-columns {
  display: grid;
  grid-template-columns: repeat(2, minmax(260px, max-content));
  gap: var(--space-6);
  justify-content: center;
}
.form-grid {
  display: grid;
  grid-template-columns: max-content var(--control-w, 220px);
  align-items: center;
  gap: var(--space-3) calc(var(--space-6));
  margin: 0 auto;
  max-width: 400px;
}
.form-grid > label { justify-self: start; }
.form-grid > .control {
  justify-self: end;
  width: var(--control-w, 220px);
}
.form-grid input[type="range"].control { width: var(--control-w, 220px); }
.form-grid input[type="color"].control { width: var(--control-w, 220px); height: 32px; padding: 0; }

/* Styled numeric inputs for Rain Controls */
.form-grid input[type="number"].control {
  background: #3f48cc;
  color: #ffffff;
  border: 1px solid #3f48cc;
  border-radius: var(--radius);
  padding: var(--space-2);
  caret-color: #ffffff;
  color-scheme: dark; /* improves spinner contrast in supported browsers */
}
.form-grid input[type="number"].control::selection { background: rgba(255,255,255,0.25); }
.form-grid input[type="number"].control:focus-visible {
  outline: 2px solid #c8d7ff;
  outline-offset: 2px;
}
/* Optional: tone down WebKit spin buttons to match the scheme */
.form-grid input[type="number"].control::-webkit-outer-spin-button,
.form-grid input[type="number"].control::-webkit-inner-spin-button {
  filter: invert(1) contrast(1.2);
}

/* Teardrop toggle */
.teardrop-btn {
  display: inline-grid;
  place-items: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  padding: 0;
  border-radius: 50%;
  cursor: pointer;
}
.teardrop-btn:hover { background: var(--bg-elev); }
.teardrop-btn:focus-visible { outline: 2px solid var(--link); outline-offset: 2px; }
.teardrop-btn svg { transform: rotate(180deg); transform-origin: 50% 50%; }
.teardrop-btn .drop { fill: #0f1115; stroke: #3f48cc; stroke-width: 2px; }
.teardrop-btn.on .drop { fill: #3f48cc; stroke: #3f48cc; }
.teardrop-btn.off .drop { fill: #0f1115; stroke: #3f48cc; }

/* Hero */
.hero { display: grid; place-items: center; padding: min(12vh, var(--space-8)) 0; text-align: center; }
.hero-title { color: #ffffff; font-size: clamp(1.8rem, 4vw + 1rem, 3rem); font-weight: 800; letter-spacing: 0.3px; line-height: 1.2; font-family: 'Orbitron', 'Share Tech Mono', sans-serif; }

/* Pips legacy UI themed for dark site */
.pips-header { display: grid; justify-items: center; margin: 12px 0 8px; }
.pips-title { margin: 0; font-weight: 800; letter-spacing: .2px; font-size: clamp(1.4rem, 1.1rem + 1.2vw, 2rem); }
.pips-subtitle { margin: 4px 0 0; color: var(--muted); font-size: 13px; }

.pips-layout { display: flex; justify-content: center; align-items: flex-start; gap: 24px; padding: 0 12px 24px; }
.pips-board-wrap { flex: 0 0 auto; }

.pips-sidebar {
  width: 420px;
  border: 1px solid var(--border); border-radius: var(--radius); padding: 12px;
  display: flex; flex-direction: column; gap: 12px; background: var(--bg-elev);
}
.tabs { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 8px; }
.pips-tab { padding: 6px 10px; border: 1px solid var(--border); background: var(--bg); color: var(--text); border-radius: 6px; cursor: pointer; }
.pips-tab.is-active { background: var(--bg-elev); border-color: var(--border); font-weight: 600; }
.panel { display: grid; gap: 8px; flex: 1; }
.sidebar-footer { margin-top: auto; display: grid; gap: 8px; }
.row { display: flex; gap: 8px; align-items: center; }
.section { display: grid; gap: 6px; }
.pips-button { padding: 6px 10px; border: 1px solid var(--border); color: var(--text); background: var(--bg); border-radius: 6px; cursor: pointer; }
.pips-button:not(.pips-primary):hover { background: var(--bg-elev); }
.pips-primary { border: 1px solid #3f48cc; background: #3f48cc; color: #fff; border-radius: 8px; font-weight: 700; }
.pips-primary:hover, .pips-primary:focus { filter: brightness(1.05); }
.pips-primary:focus-visible { outline: 2px solid var(--link); outline-offset: 2px; }
.pips-input { padding: 6px 8px; border: 1px solid var(--border); border-radius: 6px; flex: 1; background: var(--bg); color: var(--text); }
.pips-field { display: grid; grid-template-columns: 120px 1fr; align-items: center; gap: 6px; }
.pips-label { color: var(--muted); font-size: 12px; }
.pips-control > * { width: 100%; }
.hint { opacity: 0; transition: opacity 200ms ease; color: var(--muted); font-size: 12px; }
.hint.is-visible { opacity: 1; }
.palette { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
.color { width: 100%; aspect-ratio: 2/1; border-radius: 6px; border: 2px solid rgba(255,255,255,0.12); cursor: pointer; background: #111; }
.color.is-selected { outline: 2px solid #fff; outline-offset: 2px; }
.swatch { display: inline-block; width: 14px; height: 14px; border-radius: 3px; border: 1px solid #666; vertical-align: middle; margin: 0 6px; }
.note { color: var(--muted); font-size: 12px; }
.rack { display: grid; gap: 8px; grid-template-columns: 1fr; }
.rack-item { display: flex; align-items: center; gap: 8px; width: 100%; }
.rack-item > .pips-button { margin-left: auto; }
.area-item { display: flex; align-items: center; gap: 8px; width: 100%; justify-content: space-between; }
.area-left { display: flex; align-items: center; gap: 6px; flex: 1 1 auto; min-width: 0; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }
.area-item > .pips-button { white-space: nowrap; }
.pips-domino { display: inline-grid; grid-auto-flow: column; gap: 2px; border: 3px solid #000; border-radius: 8px; padding: 2px; background: transparent; }
.pips-domino-half { display: grid; place-items: center; background: #fff; border: 1px solid #bbb; border-radius: 6px; font-weight: 700; color: #000; width: 48px; height: 48px; }
.pips-demo-pane { overflow: visible; background: #ffffff; color: #000; border-radius: var(--radius); padding: var(--space-4); }
.pips-demo-pane .pips-title, .pips-demo-pane .pips-subtitle { color: #000; }
.pips-sidebar { color: var(--text); }
.pips-demo-pane .pips-layout { width: max-content; }
.pips-src-pane details { border: 1px solid var(--border); border-radius: var(--radius); padding: 8px; background: var(--bg-elev); }
.pips-src-pane pre { overflow: auto; background: #0b0e14; color: #e6e8ee; padding: 8px; border-radius: 6px; }

/* Pips tabs buttons override to use primary theme */
.pips-tabs { display: flex; gap: var(--space-3); margin-bottom: var(--space-4); justify-content: center; }
.pips-tabs .button { background: #3f48cc; color: #fff; border: 1px solid #3f48cc; }
.pips-tabs .button:hover { filter: brightness(1.05); text-decoration: none; }
.pips-tabs .button.button-secondary { background: var(--bg-elev); color: var(--text); border: 1px solid var(--border); }

/* About view backdrop */
.about-wrap { padding: var(--space-4); background: var(--bg); color: var(--text); border-radius: var(--radius); }

/* Timesweeper styles */
.ts-wrap { padding: var(--space-4); background: var(--bg); color: var(--text); border-radius: var(--radius); }
.ts-controls { display: grid; grid-template-columns: repeat(6, max-content); gap: var(--space-3) var(--space-4); align-items: end; justify-content: center; }
.ts-field { display: grid; gap: 4px; }
.ts-field input { width: 72px; padding: 6px 8px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text); }
.ts-stat { align-self: center; }
.fuse.running { color: #ef4444; font-weight: 700; }
.fuse.defused { color: #10b981; font-weight: 700; }
.ts-presets { display: flex; gap: var(--space-2); align-items: center; }
.ts-presets .button.active { background: #3f48cc; color: #fff; border: 1px solid #3f48cc; }
/* Theme New Game button to site primary */
.ts-controls #ts-new.button { background: #3f48cc; color: #fff; border: 1px solid #3f48cc; }
.ts-controls #ts-new.button:hover { filter: brightness(1.05); }

.ts-board { --ts-size: 28px; --ts-gap: 0px; display: grid; grid-template-columns: repeat(var(--ts-cols), var(--ts-size)); gap: var(--ts-gap); justify-content: center; margin-top: var(--space-4); }
.ts-cell { width: var(--ts-size); height: var(--ts-size); border-radius: 4px; border: 1px solid var(--border); background: var(--bg-elev); color: var(--text); display: grid; place-items: center; font-weight: 700; cursor: pointer; user-select: none; }
.ts-cell.hidden { background: var(--bg-elev); }
.ts-cell.hidden.flagged { background: #1a2233; position: relative; }
.ts-cell.hidden.flagged::after { content: '\2691'; color: #f87171; font-size: 16px; }
.ts-cell.hidden.tflag { background: #1a2233; position: relative; }
.ts-cell.hidden.tflag::after { content: '\2691'; color: #10b981; font-size: 16px; }
.ts-cell.revealed { background: #f3f4f6; color: #111827; }
.ts-cell.revealed.mine { background: #ffffff; color: #111; border-color: #ef4444; position: relative; }
/* Use a bomb/seaâ€‘mine icon; center perfectly */
.ts-cell.revealed.mine::after {
  content: 'ðŸ’£';
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 18px;
  line-height: 1;
}
.ts-cell.n1 { color: #2563eb; } .ts-cell.n2 { color: #16a34a; } .ts-cell.n3 { color: #dc2626; } .ts-cell.n4 { color: #7c3aed; } .ts-cell.n5 { color: #b45309; } .ts-cell.n6 { color: #0891b2; } .ts-cell.n7 { color: #374151; } .ts-cell.n8 { color: #111827; }

/* Modal */
.ts-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.55); display: grid; place-items: center; }
.ts-modal.hidden { display: none; }
.ts-modal-card { background: var(--bg-elev); color: var(--text); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-5); min-width: 280px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
.ts-modal-card h3 { margin: 0 0 var(--space-3); text-align: center; }
.ts-modal-body { display: grid; gap: var(--space-2); text-align: center; margin-bottom: var(--space-4); }
.ts-modal-actions { display: flex; justify-content: center; }
.ts-modal-actions #ts-play-again.button { background: #3f48cc; color: #fff; border: 1px solid #3f48cc; }
.ts-modal-actions #ts-play-again.button:hover { filter: brightness(1.05); }
/* Custom config save themed */
.ts-modal-actions #cfg-save.button { background: #3f48cc; color: #fff; border: 1px solid #3f48cc; }
.ts-modal-actions #cfg-save.button:hover { filter: brightness(1.05); }

/* Config modal */
.ts-config-grid { display: grid; grid-template-columns: max-content 1fr; gap: var(--space-3) var(--space-4); align-items: center; }
.ts-config-grid input { width: 80px; padding: 6px 8px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text); }
.ts-config-grid .ts-mines-row { display: flex; gap: var(--space-2); align-items: center; }
.ts-config-grid .button.small { padding: 4px 8px; font-size: 12px; }
.ts-config-grid .ts-fuse { display: inline-grid; grid-template-columns: 1fr max-content 1fr; gap: 6px; align-items: center; }
.ts-modal .hidden { display: none !important; }
